# โ ุชู ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!

## ๐ ููุฎุต ูุง ุชู ุฅูุฌุงุฒู

ุชู ุฅูุดุงุก ูุธุงู ูุงุนุฏุฉ ุจูุงูุงุช ูุชูุงูู ูุชุณุฌูู ุฏุฎูู ุงูุฃุทุฑุงู ุงูุชุงููุฉ:

### ๐ฅ ุฃููุงุน ุงููุณุชุฎุฏููู ุงููุฏุนููุฉ:
1. โ **ุงูุฃุทุจุงุก** (Doctors)
2. โ **ุงููุณุชุดููุงุช** (Hospitals)
3. โ **ุงููุชุทูุนูู** (Volunteers)
4. โ **ุงูุตูุฏููุงุช** (Pharmacies)
5. โ **ุงููุนุงูู** (Labs)

**ุงููุณุชุฎุฏู ุงูุนุงุฏู**: ูุง ูุญุชุงุฌ ูุชุณุฌูู ุฏุฎูู - ุงููููุน ููุชูุญ ููุฌููุน โจ

---

## ๐ ุงููููุงุช ุงูุชู ุชู ุฅูุดุงุคูุง

### 1๏ธโฃ ูููุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช (Supabase Migrations)
```
supabase/
โโโ migrations/
โ   โโโ 20260215_create_authentication_system.sql  โ ุงูุฌุฏุงูู ุงูุฃุณุงุณูุฉ
โ   โโโ 20260215_create_rls_policies.sql          โ ุญูุงูุฉ ุงูุจูุงูุงุช (RLS)
โ   โโโ 20260215_insert_sample_data.sql           โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ
โโโ DATABASE_README.md                             โ ุงูุชูุซูู ุงููุงูู
โโโ setup.sh                                       โ ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ
```

### 2๏ธโฃ ูููุงุช ุงูุชุทุจูู (Application Files)
```
src/
โโโ types/
โ   โโโ database.types.ts      โ ุชุนุฑููุงุช TypeScript ููุฌุฏุงูู
โโโ lib/
    โโโ supabase.ts            โ ุฅุนุฏุงุฏ Supabase Client
    โโโ auth.service.ts        โ ุฎุฏูุงุช ุงููุตุงุฏูุฉ ูุงูุชุณุฌูู
```

---

## ๐๏ธ ูููู ูุงุนุฏุฉ ุงูุจูุงูุงุช

### ุงูุฌุฏุงูู ุงูุฑุฆูุณูุฉ:

#### 1. `auth_users` - ุฌุฏูู ุงููุตุงุฏูุฉ ุงููุฑูุฒู
- ูุนูููุงุช ุชุณุฌูู ุงูุฏุฎูู ูุฌููุน ุงูุฃุทุฑุงู
- ุงูุจุฑูุฏ ุงูุฅููุชุฑููู ููููุฉ ุงููุฑูุฑ ุงููุดูุฑุฉ
- ููุน ุงููุณุชุฎุฏู (doctor, hospital, volunteer, pharmacy, lab)
- ุญุงูุฉ ุงูุญุณุงุจ (pending, active, suspended, rejected)

#### 2. `doctors` - ุฌุฏูู ุงูุฃุทุจุงุก
- ุงูุงุณู ูุงูุชุฎุตุต
- ุฑูู ุงูุชุฑุฎูุต
- ุนููุงู ุงูุนูุงุฏุฉ
- ุฑุณูู ุงูุงุณุชุดุงุฑุฉ
- ุงูุชููููุงุช

#### 3. `hospitals` - ุฌุฏูู ุงููุณุชุดููุงุช
- ุงุณู ุงููุณุชุดูู ูููุนู
- ุงูุนููุงู ูุงููููุน
- ุนุฏุฏ ุงูุฃุณุฑุฉ
- ุงูุฃูุณุงู ูุงููุฑุงูู
- ุดุฑูุงุช ุงูุชุฃููู

#### 4. `volunteers` - ุฌุฏูู ุงููุชุทูุนูู
- ุงููุนูููุงุช ุงูุดุฎุตูุฉ
- ุงูููุงุฑุงุช ูุงููุบุงุช
- ุฃููุงุช ุงูุชุทูุน
- ุณุงุนุงุช ุงูุชุทูุน ุงูููุฌุฒุฉ

#### 5. `pharmacies` - ุฌุฏูู ุงูุตูุฏููุงุช
- ุงุณู ุงูุตูุฏููุฉ
- ุฎุฏูุงุช ุงูุชูุตูู
- ุงูุทูุจ ุฃูููุงูู
- ุฃููุงุช ุงูุนูู

#### 6. `labs` - ุฌุฏูู ุงููุนุงูู
- ุงุณู ุงููุนูู
- ุฃููุงุน ุงูุชุญุงููู
- ุงูุฎุฏูุงุช ุงูููุฒููุฉ
- ููุช ุงูุชุณููู

---

## ๐ ุงูุฃูุงู ูุงูุญูุงูุฉ

### Row Level Security (RLS)
โ ุชู ุชูุนูู RLS ุนูู ุฌููุน ุงูุฌุฏุงูู

**ุงูุณูุงุณุงุช:**
- ุงููุณุชุฎุฏููู ุงููุณุฌููู: ูููููู ูุฑุงุกุฉ/ุชุนุฏูู ุจูุงูุงุชูู ููุท
- ุงูุฒูุงุฑ: ูููููู ุฑุคูุฉ ุงููููุงุช **ุงูููุซูุฉ ูุงูููุนูุฉ ููุท**
- ุงูุญุณุงุจุงุช ุงููุนููุฉ/ุงููุฑููุถุฉ: ุบูุฑ ูุฑุฆูุฉ ููุนุงูุฉ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### 1. ุชุทุจูู ุงูู Migrations ุนูู Supabase

#### ุงูุทุฑููุฉ ุงูุฃููู: Supabase Dashboard (ููุตู ุจู) โญ
1. ุงูุชุญ: https://app.supabase.com/project/vpsdajedntuzftvvjepe/sql/new
2. ุงูุณุฎ ูุญุชูู ุงููููุงุช ุจุงูุชุฑุชูุจ:
   - `supabase/migrations/20260215_create_authentication_system.sql`
   - `supabase/migrations/20260215_create_rls_policies.sql`
   - `supabase/migrations/20260215_insert_sample_data.sql` (ุงุฎุชูุงุฑู)
3. ุงูุตู ูู SQL Editor ูููุฐ ูู ููู

#### ุงูุทุฑููุฉ ุงูุซุงููุฉ: Supabase CLI
```bash
# ุชุซุจูุช CLI
npm install -g supabase

# ุชุณุฌูู ุงูุฏุฎูู
supabase login

# ุฑุจุท ุงููุดุฑูุน
supabase link --project-ref vpsdajedntuzftvvjepe

# ุชุทุจูู ุงูู migrations
supabase db push
```

### 2. ุชุดุบูู ุณูุฑูุจุช ุงูุฅุนุฏุงุฏ
```bash
bash supabase/setup.sh
```

---

## ๐งช ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ

### ุญุณุงุจุงุช ุฌุงูุฒุฉ ููุงุฎุชุจุงุฑ:
**ูููุฉ ุงููุฑูุฑ ูุฌููุน ุงูุญุณุงุจุงุช:** `password123`

| ุงูููุน | ุงูุจุฑูุฏ ุงูุฅููุชุฑููู | ุงูุงุณู |
|------|-------------------|-------|
| ุทุจูุจ | dr.ahmed@example.com | ุฏ. ุฃุญูุฏ ูุญูุฏ (ุทุจ ุงูููุจ) |
| ุทุจูุจ | dr.fatima@example.com | ุฏ. ูุงุทูุฉ ุนูู (ุทุจ ุงูุฃุทูุงู) |
| ูุณุชุดูู | info@cairo.hospital.com | ูุณุชุดูู ุงููุงูุฑุฉ ุงูุฏููู |
| ูุณุชุดูู | contact@alex.hospital.com | ูุณุชุดูู ุงูุฅุณููุฏุฑูุฉ ุงูุฌุงูุนู |
| ูุชุทูุน | volunteer1@example.com | ูุญูุฏ ุญุณู |
| ูุชุทูุน | volunteer2@example.com | ุณุงุฑุฉ ุฃุญูุฏ |
| ุตูุฏููุฉ | info@elshifa.pharmacy.com | ุตูุฏููุฉ ุงูุดูุงุก |
| ุตูุฏููุฉ | contact@seha.pharmacy.com | ุตูุฏููุฉ ุงูุตุญุฉ |
| ูุนูู | info@alpha.lab.com | ูุนูู ุฃููุง |
| ูุนูู | contact@beta.lab.com | ูุนูู ุจูุชุง |

---

## ๐ป ุฃูุซูุฉ ุงูุงุณุชุฎุฏุงู ูู ุงูููุฏ

### ุชุณุฌูู ุทุจูุจ ุฌุฏูุฏ:
```typescript
import { registerDoctor } from '@/lib/auth.service';

const newDoctor = await registerDoctor({
  email: 'doctor@example.com',
  password: 'securePassword123',
  phone: '+201234567890',
  full_name: 'ุฏ. ูุญูุฏ ุฃุญูุฏ',
  specialization: 'ุทุจ ุงูุฃุณูุงู',
  license_number: 'DOC-2024-123',
  city: 'ุงููุงูุฑุฉ',
  governorate: 'ุงููุงูุฑุฉ',
  consultation_fee: 200,
  bio: 'ุทุจูุจ ุฃุณูุงู ูุชุฎุตุต'
});
```

### ุชุณุฌูู ุงูุฏุฎูู:
```typescript
import { login } from '@/lib/auth.service';

const { user, profile } = await login({
  email: 'dr.ahmed@example.com',
  password: 'password123'
});

console.log(user.user_type); // 'doctor'
console.log(profile.full_name); // 'ุฏ. ุฃุญูุฏ ูุญูุฏ'
```

### ุฌูุจ ุงูุฃุทุจุงุก ุงูููุซููู:
```typescript
import { getVerifiedDoctors } from '@/lib/auth.service';

const doctors = await getVerifiedDoctors({
  city: 'ุงููุงูุฑุฉ',
  specialization: 'ุทุจ ุงูููุจ'
});
```

---

## ๐ ุงูุชูุซูู ุงููุงูู

ููุญุตูู ุนูู ูุนูููุงุช ุชูุตูููุฉุ ุฑุงุฌุน:
- **`supabase/DATABASE_README.md`** - ุงูุชูุซูู ุงููุงูู ููุงุนุฏุฉ ุงูุจูุงูุงุช
- **`src/types/database.types.ts`** - ุชุนุฑููุงุช TypeScript
- **`src/lib/auth.service.ts`** - ุฎุฏูุงุช ุงููุตุงุฏูุฉ

---

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุชุดููุฑ ูููุงุช ุงููุฑูุฑ**: 
   - ุงูุจูุงูุงุช ุงูุชุฌุฑูุจูุฉ ุชุณุชุฎุฏู SHA-256 (ููุชูุถูุญ ููุท)
   - ูู ุงูุฅูุชุงุฌุ ุงุณุชุฎุฏู **bcrypt** ุฃู **argon2**

2. **ุงูุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู**:
   - ุฃุถู ูุธุงู ููุชุญูู ูู ุงูุจุฑูุฏ ุงูุฅููุชุฑููู

3. **ุงูุตูุฑ**:
   - ุงุณุชุฎุฏู Supabase Storage ูุชุฎุฒูู ุตูุฑ ุงููููุงุช ุงูุดุฎุตูุฉ

4. **ุงูุจุญุซ**:
   - ุฃุถู Full-Text Search ููุจุญุซ ุงููุชูุฏู

---

## โจ ุงูููุฒุงุช

โ ูุธุงู ูุตุงุฏูุฉ ูุชุนุฏุฏ ุงูุฃุทุฑุงู
โ ุญูุงูุฉ ุงูุจูุงูุงุช ุจู Row Level Security
โ ุฌุฏุงูู ูููุตูุฉ ููู ููุน ูุณุชุฎุฏู
โ ูุธุงู ุงูุชููููุงุช ูุงููุฑุงุฌุนุงุช
โ ุฏุนู ุงูููุงูุน ุงูุฌุบุฑุงููุฉ
โ ุจูุงูุงุช ุชุฌุฑูุจูุฉ ุฌุงูุฒุฉ
โ TypeScript Types ูุงููุฉ
โ ุฎุฏูุงุช ุฌุงูุฒุฉ ููุงุณุชุฎุฏุงู
โ ุชูุซูู ุดุงูู ุจุงูุนุฑุจูุฉ ูุงูุฅูุฌููุฒูุฉ

---

## ๐ฏ ุงูุฎุทูุงุช ุงููุงุฏูุฉ ุงูููุชุฑุญุฉ

1. โณ ุชุทุจูู ุงูู migrations ุนูู Supabase
2. โณ ุฅูุดุงุก ุตูุญุงุช ุงูุชุณุฌูู ููู ููุน
3. โณ ุฅูุดุงุก ุตูุญุฉ ุชุณุฌูู ุงูุฏุฎูู ููุญุฏุฉ
4. โณ ุฅูุดุงุก ููุญุงุช ุชุญูู ูุฎุตุตุฉ
5. โณ ุฅุถุงูุฉ ูุธุงู ุงูุชููููุงุช
6. โณ ุฅุถุงูุฉ ูุธุงู ุงูุจุญุซ ูุงูููุชุฑุฉ
7. โณ ุฅุถุงูุฉ ุฑูุน ุงูุตูุฑ
8. โณ ุฅุถุงูุฉ ูุธุงู ุงูุฅุดุนุงุฑุงุช

---

**ุชู ุจุญูุฏ ุงููู! ๐**

ูููุณุงุนุฏุฉ ุฃู ุงูุงุณุชูุณุงุฑุงุชุ ุฑุงุฌุน ููู `supabase/DATABASE_README.md`
